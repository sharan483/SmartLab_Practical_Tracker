<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Student Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: 'JetBrains Mono', monospace;
      background: linear-gradient(115deg,#43cea2 0,#185a9d 100%);
      background-size: 200% 200%;
      animation: gradientMove 13s ease-in-out infinite;
      color: #222;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    @keyframes gradientMove {
      0% { background-position: 0% 40%; }
      50% { background-position: 100% 60%; }
      100% { background-position: 0% 40%; }
    }
    body {
      min-height: 100vh;
      overflow-y: auto;
    }
    .dashboard {
      background: rgba(255, 255, 255, 0.17);
      border-radius: 28px;
      box-shadow: 0 16px 48px rgba(30,64,175,0.2);
      padding: 48px 56px;
      max-width: 650px;
      width: 90vw;
      box-sizing: border-box;
      backdrop-filter: blur(22px);
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 1;
    }
    h2 {
      font-weight: 700;
      font-size: 3rem;
      color: #1e40af;
      margin-bottom: 26px;
      text-align: center;
    }
    p.pin {
      font-weight: 700;
      font-size: 1.25rem;
      color: #29475b;
      text-align: center;
      margin-bottom: 30px;
      word-break: break-word;
    }
    .quote {
      background: #e7f5ff;
      border-left: 6px solid #1e3a8a;
      padding: 20px 32px;
      font-style: italic;
      font-size: 1.3rem;
      color: #274066;
      border-radius: 12px;
      margin-bottom: 40px;
      box-shadow: 0 8px 32px rgba(41,82,255,0.12);
      user-select: none;
      width: 100%;
    }
    h3 {
      color: #0e7057;
      font-size: 1.75rem;
      margin-bottom: 22px;
      font-weight: 700;
      letter-spacing: 0.1em;
      align-self: flex-start;
    }
    .experiment-box {
      background: white;
      border-radius: 20px;
      padding: 28px 32px;
      color: #1e3a8a;
      box-shadow: 0 10px 40px rgba(41,66,255,0.12);
      margin-bottom: 38px;
      font-size: 1.2rem;
      line-height: 1.6;
      word-break: break-word;
      text-align: justify;
      width: 100%;
    }
    label {
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: 12px;
      color: #29475b;
      display: block;
      margin-bottom: 14px;
      width: 100%;
    }
    textarea {
      width: 100%;
      padding: 22px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.25rem;
      border-radius: 20px;
      border: 2px solid #3b82f6;
      background: #f1faff;
      box-sizing: border-box;
      resize: vertical;
      min-height: 180px;
      max-height: 520px;
      box-shadow: inset 0 0 18px #cce3ff;
      transition: border-color 0.3s, box-shadow 0.3s;
      margin-bottom: 48px;
    }
    textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 28px #5c94f4a0;
      outline: none;
    }
    button[type="submit"] {
      width: 100%;
      background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
      border-radius: 20px;
      color: white;
      font-weight: 700;
      font-size: 1.4rem;
      padding: 22px 0;
      box-shadow: 0 10px 40px rgba(59,130,246,0.7);
      border: none;
      cursor: pointer;
      transition: box-shadow 0.22s ease, background 0.22s ease, transform 0.18s ease;
      margin-bottom: 16px;
    }
    button[type="submit"]:hover {
      background: linear-gradient(90deg, #2563eb 0%, #3b82f6 100%);
      box-shadow: 0 14px 48px rgba(37,99,235,0.9);
      transform: scale(1.06);
    }
    a.logout {
      font-weight: 700;
      color: #2563eb;
      font-size: 1.3rem;
      text-decoration: none;
      margin-top: 40px;
      text-align: center;
      display: block;
      transition: color 0.28s ease;
    }
    a.logout:hover {
      color: #1e40af;
    }
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #2ecc71;
      color: white;
      padding: 12px 20px;
      border-radius: 6px;
      font-weight: bold;
      font-size: 1rem;
      display: none;
      z-index: 9999;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      animation: fadein 0.5s;
    }
    @keyframes fadein {
      from { opacity: 0; right: 0px; }
      to { opacity: 1; right: 20px; }
    }
    @media (max-width: 768px) {
      .side-animation {
        display: none;
      }
    }
  </style>
  <script>
    window.onload = function () {
      var submitted = document.body.getAttribute('data-submitted');
      if (submitted === "true") {
        var toast = document.getElementById('toast');
        toast.style.display = 'block';
        setTimeout(() => { toast.style.display = 'none'; }, 3000);
      }
    };
  </script>
</head>
<body data-submitted="{{ 'true' if submitted else 'false' }}">

  <!-- Animated side visual -->
  <div class="side-animation">
    <lottie-player
      src="https://lottie.host/0c2014de-502c-4e33-b2d1-9678ed30f82e/4NkK0Uo2Wm.json"
      background="transparent"
      speed="1"
      style="width: 300px; height: 300px;"
      loop
      autoplay>
    </lottie-player>
  </div>

  <div class="dashboard">
    <h2>Welcome, {{ name }}</h2>
    <p>Your PIN: <strong>{{ pin }}</strong></p>

    <div class="quote">"Code is like humor. When you have to explain it, itâ€™s bad." ðŸ’¡</div>

    {% if question %}
      <h3>Assigned Experiment</h3>
      <p><strong>{{ question[1] }}</strong></p>

      <form action="/submit_answer" method="POST">
        <input type="hidden" name="question_id" value="{{ question[0] }}" />
        <label for="answer_text">Write Your Practical Answer Below:</label>
        <textarea id="answer_text" name="answer_text" rows="12" required>{{ answer }}</textarea>
        <button type="submit">Submit Answer</button>
      </form>
    {% else %}
      <p>No experiment has been assigned yet.</p>
    {% endif %}

    <a href="/logout">Logout</a>
  </div>

  <div id="toast" class="toast">Answer Submitted!</div>
</body>
</html>
